<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="styling.css">
    <title>Message</title>
    <style>
    body{
      margin-top:20px;
      background-color: #642e7e;
    }

.chat-online {
    color: #34ce57
}

.chat-offline {
    color: #e4606d
}

.chat-messages {
    height: 500px;
    overflow-y: scroll
}
.chat-container {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

.chat-box {
  flex-grow: 1;
  overflow-y: auto;
}

.send-bar-container {
  position: sticky;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  background-color: #ffffff;
  padding: 10px;
  border-top: 1px solid #e6e6e6;
}


.chat-message-left {
    margin-right: auto
}

.chat-message-right {
    flex-direction: row-reverse;
    margin-left: auto
}
</style>
  </head>
  <body>
    <div>

    </div>
    <div>
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
          <a class="navbar-brand d-flex align-items-center" href="#">
            <img src="https://via.placeholder.com/30" alt="Devuzz" class="me-2"> Devuzz
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse navbar-inverse" id="navbarContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="/">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="https://github.com/AndyShyklo/bombSquad__andys103_abidurr6_chongtianm_tawabb/tree/370809bfd3aa69a4f95aa47701ac20ad9447f984">Find Topher</a>
              </li>
              <li class = "nav-item">
                <a class="nav-link active" href="/profile">Your Profile</a>
              </li>
              <li class = "nav-item">
                <a class="nav-link active" href="/messages">See your messages! </a>
              </li>
              <li class = "nav-item">
                <a class="nav-link active" href="/Match">Find your Driver</a>
              </li>
              <li class = "nav-item">
                <a class="nav-link active" href="/logout">Logout ;c</a>
              </li>
              <li class="nav-item">
                <a class="nav-link disabled">Becuzz a Devuzz Golduzz</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

  </div>

    <h1 class="text-3xl font-bold underline text-center">
      Direct Messages
    </h1>

    <main class="content">
    <div class="container p-0">
		<div class="card">
			<div class="row g-0">
				<div class="col-12 col-lg-5 col-xl-3 border-right">
          {% for n in range(matches|length) %}



					<a href="#" class="list-group-item list-group-item-action border-0">
						<div class="d-flex align-items-start">
							<div class=" ml-3">
                <form method="POST">
                  <button type="submit" name="type" value="{{n}}">{{matches[n]}}</button>
                </form>
							</div>
						</div>
					</a>
          {% endfor %}

					<hr class="d-block d-lg-none mt-1 mb-0">
				</div>
				<div class="col-12 col-lg-7 col-xl-9">
					<div class="py-2 px-4 border-bottom d-none d-lg-block">
						<div class="d-flex align-items-center py-1">
							<div class="position-relative">
							</div>
							<div class="flex-grow-1 pl-3">
							</div>
							<div>
								<button class="btn btn-primary btn-lg mr-1 px-3"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-phone feather-lg"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg></button>
								<button class="btn btn-info btn-lg mr-1 px-3 d-none d-md-inline-block"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-video feather-lg"><polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect></svg></button>
								<button class="btn btn-light border btn-lg px-3"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal feather-lg"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></button>
							</div>
						</div>
					</div>

          <section>
					<div class="position-relative">
            <div class="chat-messages p-4">
              <ul class="list-unstyled">


          {% if convo_open > -1 %}
               {% for message in convos[convo_open] %}
               {% if message.get("sender") == user %}
               <li class="d-flex justify-content-end mb-4">
                 <img src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-6.webp" alt="avatar"
                   class="rounded-circle d-flex align-self-start me-3 shadow-1-strong" width="60">
                 <div class="card">
                   <div class="card-header d-flex justify-content-between p-3">
                     <p class="fw-bold mb-0">You</p>
                     <p class="text-muted small mb-0"><i class="far fa-clock"></i> {{message.get("time-sent")}}</p>
                   </div>
                   <div class="card-body">
                     <p class="mb-0">
                       {{message.get("text")}}
                     </p>
                   </div>
                 </div>
               </li>

                 {% endif %}
                 {% if message.get("sender") != user %}
                    <li class="d-flex justify-content-start mb-4">
                      <img src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-6.webp" alt="avatar"
                        class="rounded-circle d-flex align-self-start me-3 shadow-1-strong" width="60">
                      <div class="card">
                        <div class="card-header d-flex  justify-content-between p-3">
                          <p class="fw-bold mb-0">{{message.get("sender")}}</p>
                          <p class="text-muted small mb-0"><i class="far fa-clock"></i>{{message.get("time-sent")}}</p>
                        </div>
                        <div class="card-body">
                          <p class="mb-0">
                            {{message.get("text")}}
                          </p>
                        </div>
                      </div>
                    </li>

                 {% endif %}
               {% endfor %}
             {% endif %}
             <div class="col-md-6 col-lg-7 col-xl-8">
					<div class="py-3 px-4 border-top">
						<div class="send-bar-container">
              <form method="POST" class = "d-flex">
  							<input type="text" class="form-control me-2" name = "usermessage" placeholder="Type your message">
  							<button class="btn btn-primary" name = "type" value = "sendbutton">Send</button>
              </form>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>
</main>
</section>



    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  </body>
</html>
